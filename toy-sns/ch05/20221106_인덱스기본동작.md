## HashMap
- 단건 검색 속도 = O(1)
- 범위 탐색 O(n)
- 전방 일치 탐색 불가 like 'AB%'

## List
- 정렬되지 않은 리스트 탐색 O(n)
- 정렬된 리스트 탐색 O(logN)
- 정렬되지 않은 리스트의 정렬 O(n) ~ O(n * logN)
- 삽입/삭제 비용 매우 높음

## Tree
- 트리 높이에 따라 시간 복잡도 결정됨
- 트리 높이를 최소화하는 것이 중요
- 한쪽으로 노드가 치우치지 않도록 균형을 잡아주는 트리 사용

### B+Tree
- 삽입/삭제시 항상 균형을 이룸
- 하나의 노드가 여러 개의 자식 노드를 가질 수 있음
- 리프 노드에만 데이터 존재
    - 연속적인 데이터 접근 시 유리 

## mysql pk 를 인덱스에 저장
- 모든 인덱스가 pk 를 들게되기 때문에 pk 사이즈가 중요하다.
- pk 가 크면 리밸런싱이 많이 들기 때문이다.

## 클러스터 인덱스
1. 클러스터 인덱스는 데이터 위치를 결정하는 키 값이다.
2. MySQL의 PK는 클러스터 인덱스다.
3. MySQL에서 PK를 제외한 모든 인덱스는 PK를 가지고 있다.

> 클러스터링이란 여러 개를 하나로 묶는다는 의미로 주로 사용되는데, 인덱스의 클러스터링도 그 의미를 크게 벗어나지 않는다. MySQL 서버에서 클러스터링은 테이블의 레코드를 비슷한 것들끼리 묶어서 저장하는 형태로 구현된다. MySQL에서 클러스터링 인덱스는 InnoDB 스토리지 엔진에서만 지원하며, 나머지 스토리지 엔진에서는 지원되지 않는다.

### 1. 클러스터 인덱스는 데이터 위치를 결정하는 키 값이다.
프라이머리 키 값이 비슷한 레코드들끼리 묶어서 저장하는 것을 클러스터링 인덱스라고 표현한다. 여기서 중요한 것은 프라이머리 키 값에 의해 레코드의 저장 위치가 결정된다는 것이다. 

또한 프라이머리 키 값이 변경된다면 그 레코드의 물리적인 저장 위치가 바뀌어야 한다는 것을 의미하기도 한다. 

클러스터 키는 정렬을 이루고 있다.

|클러스터 키|데이터 주소|
|--|--|
|1|A|
|2|B|
|3|C|
|5|D|

ex. 4번이 insert 된다면, 3번과 5번 사이에 위치한다.

### 2. MySQL의 PK는 클러스터 인덱스다.
PK 순서에 따라서 데이터 저장 위치가 변경된다.
PK 키 삽입/갱신시에 성능이슈 발생

클러스터링 테이블은 그 자체가 하나의 거대한 인덱스 구조로 관리된다. 

클러스터링 인덱스의 리프 노드에는 레코드의 모든 칼럼이 같이 저장되어 있다.

따라서 만약, pk를 변경하는 문장이 실행되면 페이지 번호가 변경된다.(실제 데이터 레코드의 위치가 변경된다.)

### 3. MySQL에서 PK를 제외한 모든 인덱스는 PK를 가지고 있다.
PK의 사이즈가 인덱스의 사이즈를 결정한다.


### 클러스터 인덱스 장점
1. PK를 활용한 검색이 빠름, 특히 범위 검색
2. 세컨더리 인덱스들이 PK를 가지고 있어 커버링에 유리

### 클러스터 인덱스 단점
1. 테이블의 모든 세컨더리 인덱스가 클러스터링 키를 갖기 때문에 클러스터링 키 값의 크기가 클 경우 전체적으로 인덱스의 크기가 커진다.
2. 세컨더리 인덱스를 통해 검색할 때 pk로 다시 검색해야 하므로 처리 성능이 느리다.
3. insert할 때 프라이머리 키에 의해 레코드의 저장 위치가 결정되기 때문에 성능이 느리다.
4. 프라이머리 키를 변경할 때 레코드를 delete하고 insert하는 작업이 필요하기 때문에 처리 성능이 느리다.

---

## PK로 auto increment vs. UUID
InnoDB의 pk는 클러스터링 키로 사용되며, 이 값에 의해 레코드의 위치가 결정된다. 즉 pk로 검색하는 경우 클러스터링되지 않은 테이블에 비해 매우 빠르게 처리될 수 있다.

MyISAM과 같이 클러스터링 되지 않는 테이블에서는 사실 프라이머리 키로 뭘 선택해도 성능의 차이는 별로 없을 수 있지만, InnoDB에서는 엄청난 차이를 만든다. 

InnoDB테이블에서 프라이머리키를 정의하지 않으면 InnoDB 스토리지 엔진이 내부적으로 일련번호 칼럼을 추가한다. 하지만 이렇게 자동으로 추가된 칼럼은 사용자에게 보이지 않기 때문에 사용자가 전혀 접근(사용)할수가없다. 

즉, InnoDB 테이블에 pk키를 정의하지 않는 경우와 AUTO_INCRENENT 칼럼을 생성하고 프라이머리키로 설정하는것이 결국 똑같기 때문에, 사용자가 사용할 수 있는 값(AUTO_INCRENENT값)을 프라이머리키로 설정하는 것이 좋다.

만약, 복합 pk로 pk 크기가 길어질 때가 있는데, 세컨더리 인덱스가 필요치 않다면 그대로 pk 를 사용하는게 좋다.

그게 아니라면 AUTO_INCREMENT 칼럼을 추가하고 이를 pk로 설정하면 된다.
