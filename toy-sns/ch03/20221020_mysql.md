# mysql 사용 이유
1. 가장 인기 많은 오픈소스 관계형 데이터베이스
    - http://github.com/mysql/mysql-server
    - https://dev.mysql.com/doc/internals/en/guided-tour.html
    - https://dev.mysql.com/doc/dev/mysql-server/latest/

2. 높은 접근성과 낮은 비용
3. 네이버, 카카오, 토스 등 대부분 국내 IT 기업에서 가장 많이 사용됨
4. sql 안식 표준을 지킴

# Mysql 아키텍처 Overview
1. Mysql 엔진: 판단하는 곳
    1. 쿼리 파서
        - sql 파싱하여 syntax tree 생성
        - 문법 오류 검사
    2. 전처리기
        - tree 바탕으로 전처리 시작
        테이블, 컬럼 존재 여부 등 확인
        - 접근 권한 등 semantic 검사 
    > 쿼리 파서, 전처리기는 컴파일 과정과 매우 유사하다. 하지만 sql은 프로그래밍 언어처럼 컴파일 타임 때 검증할 수 없어 매번 구문 평가를 진행한다.
    3. 옵티마이저
        - 쿼리 처리를 위한 여러 방법 만듦
        - 각 방법들의 비용정보와 테이블의 통계정보를 이용해 cost 산정
        - 테이블 순서, 불필요한 조건 제거, 통계정보 바탕으로 전략 결정(실행 계획 수립)
        - 옵티마이저가 나쁜 판단을 할 수도 있기 때문에 개발자가 힌트를 사용해 도움을 줄 수 있다.
    4. 쿼리 실행기
        - 옵티마이저가 결정한 계획대로 스토리지 엔진에 전달한다.
        - 이 때, Handler API 로 요청한다.
2. 스토리지 엔진: 판단을 수행하는 곳

## 쿼리 캐시
- Mysql 5.0 까지는 쿼리 캐시가 있었음.
- 8.0 대 들어와서는 쿼리 캐시는 폐기됨. 
    - 사유: 테이블이 변경되었을 때 캐시도 변경이 되어야 하는데 이 과정에서 lock 관련 문제가 생겼음. 

## 오라클 소프트 파싱, 하드 파싱
1. 소프트 파싱: SQL, 실행계획을 캐시에서 찾아 옵티마이저 과정을 생략하고 실행단계로 넘어감.
2. 하드 파싱: 실행계획을 캐시에서 찾지 못해 옵티마이저 과정을 거쳐 실행단계로 넘어감.

## 캐시 (오라클 vs. Mysql)
- MySQL, Oracle 소프트 파싱 모두 성능 최적화를 위해 캐시라는 기술을 도입 -> 캐시 범위가 다르다.
- 캐시 도입할 때는 항상 만료 정책을 고려해야한다.
- 쿼리 캐시는 소프트 파싱에 비해 조회 성능은 더 높지만 캐시 데이터 관리에 더 높은 비용이 들어간다.

## 스토리지 엔진
- 디스크에서 데이터를 가져오거나 저장하는 역할.
- MySQL 스토리지 엔진은 플러그인 형태로 Handler API만 맞춘다면 직접 구현해서 사용할 수 있다.
- InnoDB, MyIsam 등 여러개의 스토리지 엔진이 존재
- 8.0대 부터는 InnoDB 엔진을 디폴트

## KeyWord
Clustered Index, Redu - Undo, Buffer Pool
